
/*
 * 
 * THIS EXAMPLE IS FOR THE PRIMARY ESP32 IN A MESH
 * 
 * Choose a balance of settings between active scanning and passive scanning. Active scanning uses more battery of switchbot devices but it required for bot, curtain meter
 * 
 *
 * THIS IS NOT THE FULL CODE. These are the settings that apply to a mesh setup
 */


/* Wifi Settings */
static const char* host = "esp32mesh1";                                    //  Unique name for ESP32. The name detected by your router and MQTT. If you are using more then 1 ESPs to control different switchbots be sure to use unique hostnames. Host is the MQTT Client name and is used in MQTT topics

/* Mesh Settings */
/* Ignore if only one ESP32 is used */
static const bool enableMesh = true;                                 // Ignore if only one ESP32 is used. Set to false
static const char* meshHost = "esp32";                                     // Ignore if only one ESP32 is used. Ignore if you don't have either meter/contact/motion. Enter the host value of the primary ESP32 if you are using multiple esp32s and you want to mesh them together for better contact/motion
static const bool meshMeters = true;                                  // Mesh meters together if meshHost is set. The meter values will use the meshHost MQTT topics
static const bool meshContactSensors = true;                          // Mesh contact sensors together if meshHost is set. The contact values will use the meshHost MQTT topics.
static const bool meshMotionSensors = true;                           // Mesh motion sensors together if meshHost is set. The motion values will use the meshHost MQTT topics
static const bool onlyAllowRootESPToPublishContact = true;            // All meshed messages for contact and motions sensors will pass through the root mesh host ESP32. Only the root host will send contact and motion messages
static const bool onlyAllowRootESPToPublishMotion = false;            // All meshed messages for motion will pass through the root mesh host ESP32. Only the root host will send motion messages
static const bool onlyAllowRootESPToPublishLight = true;              // All meshed messages for illuminance will pass through the root mesh host ESP32. Only the root host will send illuminance messages
static const bool countContactToAvoidDuplicates = true;               // count the number of open/close/timeout over all esp32s so that none are duplicated
static const bool countMotionToAvoidDuplicates = false;               // count the number of motion/no motion over all esp32s so that none are duplicated
static const bool countLightToAvoidDuplicates = true;                 // count the number of dark/bright over all esp32s so that none are duplicated
static const int timeToIgnoreDuplicates = 30;                         // if a duplicate is determined, ignore it within X seconds




/* Switchbot Meter Settings */
static std::map<std::string, std::string> allMeters = {
  { "meterone", "xX:xX:xX:xX:xX:xX" },
  { "metertwo", "yY:yY:yY:yY:yY:yY" }
};

/* Switchbot Contact Sensor Settings */
static std::map<std::string, std::string> allContactSensors = {
  { "contactone", "xX:xX:xX:xX:xX:xX" },
  { "contacttwo", "yY:yY:yY:yY:yY:yY" }
};

/* Switchbot Motion Sensor Settings */
static std::map<std::string, std::string> allMotionSensors = {
  { "motionone", "xX:xX:xX:xX:xX:xX" },
  { "motiontwo", "yY:yY:yY:yY:yY:yY" }
};



static const int rescanTime = 18000;                           // Automatically rescan for device info of all devices every X seconds (default 10 min)

static const int defaultMeterScanSecs = 1800;                 // Default Scan/MQTT Update for meter temp sensors every X seconds. *override with botScanTime list

static const bool alwaysMQTTUpdate = true;                // If the ESP32 is scanning, always publish MQTT data instead of using set times
static const bool onlyActiveScan = false;                 // Active scanning requires more battery from the BLE switchbot devices. If false, passive scanning is used when possible for contact/motion
static const bool onlyPassiveScan = false;                // If this ESP32 is a mesh ESP32 or you only have motion/contact sensors. Passive scanning uses less battery from BLE switchbot devices. Passive scanning provides less data then active scanning, but uses less battery
static const bool alwaysActiveScan = false;               // No battery optimizations. If you are using the switchbot hub or app to control devices also and you want immediate state updates in MQTT set to true.
